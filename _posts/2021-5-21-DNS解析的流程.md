---
layout: post
title: DNS解析流程
date: 2021-5-21
categories: blog
tags: [Computer_Network]
author: Mars
pIdentifier: 中文缩进
---

> DNS的解析流程

# DNS解析流程

DNS解析使用UDP协议进行。流程如下：

1. 主机提出需要解析的域名(www.baidu.com)，请求本地域名服务器解析。如果本地域名服务器缓存中存在这个域名和对应的ip地址，则直接返回ip给主机。
2. 如果本地域名服务器缓存中没有，则本地域名服务器代替主机与根域名服务器进行请求。（主机与本地域名服务器之间为**递归查询**）

> 递归查询：每次由下一级服务器代表上一级服务器进行查询，最终结果层层返回。

3. 本地域名服务器向根域名服务器进行请求，根域名服务器返回下一级域名服务器(.com顶级域名服务器)的ip地址给本地域名服务器；
4. 本地域名服务器向.com顶级域名服务器发起请求，.com顶级域名服务器返回下一级域名服务器(baidu.com二级域名服务器)ip地址给本地域名服务器；
5. 本地域名服务器向baidu.com二级域名服务器发起请求，baidu.com二级域名服务器内保存了www.baidu.com域名的ip地址，所以返回这个ip地址给本地域名服务器；

> 本地域名服务器与其他域名服务器的查询，为迭代查询。
>
> 迭代查询：每次查询下一级服务器返回结果给发起查询的服务器，由发起查询的服务器自己进行发起下一次的查询。

6. 本地域名服务器将查询到的结果返回给主机，并把域名www.baidu.com和对应的IP地址保存到本地DNS高速缓存中，以备主机下一次查询。
