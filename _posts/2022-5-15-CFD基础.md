---
layout: post
title: CFD基础
date: 2022-5-15
categories: blog
tags: [Fluid,CFD]
author: Mars
pIdentifier: 中文缩进
---

> CFD基础

# 一些结论

1. 计算模型参数在计算前需要进行校校准，系统默认参数需要调整；
2. 计算结果需要校核（与实验值进行比较）；
3. 一般需要根据判断对原始几何模型进行一定程度的简化，不一定要保留全部细节；
4. 网格质量会影响计算精度和收敛性，但网格形状不会（结构、非结构）；
5. 模型对结果的影响更大。模型的错误会影响计算结果的正确性，网格只会影响计算的精度和收敛性；
6. CFD的计算结果优劣与流体力学基础和对流动的理解有关，而非软件使用层面；

# CFD包括的内容

1. 常规层流、湍流计算；
2. 传热计算；
3. 多相流；
4. 组分扩散计算；
5. 其他物理现象；

# 残差与收敛准则
## 什么是残差

残差(Residual)是计算单元各个面的通量之和。

计算收敛后，理论上当计算单元内没有源项时，各个面的物理量通量之和应该为零，也就是残差为零。

## 残差类型

1. **最大残差（MAX）**：取网格中所有单元的最大残差，作为当前迭代步的残差；
2. **平均残差（AVR）**：计算网格中所有单元残差的算术平均值，作为当前迭代步的残差；
3. **均方根残差（RMS）**：计算网格中所有单元残差的算均方根，作为当前迭代步的残差（最常用）；

## 收敛准则

有三种收敛判断准则：

1. **【残差判据】残差降低到预设标准：**单精度至少为`1e-3`以下；
2. **【通量守恒】进出口物理量达到平衡（差为0）；**
3. **【监控参数】计算域（关注点）物理量不再随着计算迭代而变化。**

只有在残差无法降低到预设标准时，才考虑使用条件2或3来判断收敛。

收敛的结果不一定是正确的，但不收敛的结果一定是错误的。

## 残差一直无法降低的原因判断

1. **残差在较高位震荡：** 
   - 边界条件设置不合理；
   - 初始值设置不合理；
   - 网格质量不佳；
   - 流场本身存在非定常（周期性）震荡；
2. **MAX残差与RMS残差的比值超过了10**：
   - 错误发生在流场的局部；
   - 检查MAX残差出现的位置。

## 计算发散原因

- 边界位置或边界条件设置错误；
- 网格质量太差；
- 流动本身存在强烈非定常；
- 初始流场与目标流场差距太大；
- 计算步长（CFL数）太大；




