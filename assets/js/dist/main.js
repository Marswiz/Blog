(()=>{window.addEventListener("load",(()=>{let e=document.querySelectorAll("a");for(let t of e)t.href&&-1===t.href.indexOf("marswiz")&&-1===t.href.indexOf("localhost")&&(t.target="_blank")}));let e=!1;try{let t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}function t(e,t){let o=null;return function(...n){null===o||clearTimeout(o),o=setTimeout((()=>{e(...n),o=null}),1e3*t)}}function o(e,t){let o=0;return function(...n){let r=Date.now();r-o>=1e3*t&&(e(...n),o=r)}}function n(e){let t=e.target.src.replace(/Black/,"Blue");e.target.src=t}function r(e){let t=e.target.src.replace(/Blue/,"Black");e.target.src=t}function l(){document.querySelector("#navBlog").classList.remove("navHidden"),document.querySelector("#navFront").classList.remove("navShown"),document.querySelector("#navFront").classList.add("navHidden"),document.querySelector("#navBlog").classList.add("navShown")}function a(){document.querySelector("#navFront").classList.remove("navHidden"),document.querySelector("#navBlog").classList.remove("navShown"),document.querySelector("#navBlog").classList.add("navHidden"),document.querySelector("#navFront").classList.add("navShown")}function i(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}document.querySelector("#blogBtn img").addEventListener("mouseover",n,!1),document.querySelector("#tagBtn img").addEventListener("mouseover",n,!1),document.querySelector("#aboutMeBtn img").addEventListener("mouseover",n,!1),document.querySelector("#searchBtn img").addEventListener("mouseover",n,!1),document.querySelector("#blogBtn img").addEventListener("mouseout",r,!1),document.querySelector("#tagBtn img").addEventListener("mouseout",r,!1),document.querySelector("#aboutMeBtn img").addEventListener("mouseout",r,!1),document.querySelector("#searchBtn img").addEventListener("mouseout",r,!1),document.querySelector("#logo #blogLogo").addEventListener("mouseover",(function(e){let t=e.target.src.replace(/Black/,"White");e.target.src=t}),!1),document.querySelector("#logo #blogLogo").addEventListener("mouseout",(function(e){let t=e.target.src.replace(/White/,"Black");e.target.src=t}),!1);let s=function(e){return e.wheelDelta||40*-e.detail},d=function(){return i()?"touchmove":"object"==typeof window.onmousewheel?"mousewheel":"DOMMouseScroll"};function c(t){if((-120==s(t)||-150==s(t)||-210==s(t)||i())&&window.innerWidth>=768)return t.preventDefault(),window.scrollTo(0,document.querySelector("#frontShow").offsetHeight),l(),window.removeEventListener(d(),c,!!e&&{passive:!1})}function u(){window.scrollY<=10?window.addEventListener(d(),c,!!e&&{passive:!1}):window.scrollY>10&&window.scrollY<document.querySelector("#frontShow").offsetHeight-30&&(window.scrollTo(0,0),a(),$("#frontPageInfo").hide(),$("#tagBox").hide(),$("#frontPageInfo").slideDown(1500),$("#tagBox").slideDown(500))}function g(){let e=document.querySelectorAll("#postContent a");for(let t=0;t<e.length;t++)e[t].innerHTML=e[t].innerHTML.replace(/^/g,'&nbsp;<i class="fa fa-hand-pointer-o"></i>&nbsp;');let t=document.querySelectorAll("#postContent h1,#postContent h2,#postContent h3,#postContent h4,#postContent h5,#postContent h6");for(let e of t){let t='<span class="link hidden">#</span>';window.innerWidth>768&&(e.innerHTML=t+e.innerHTML),e.addEventListener("mouseover",(t=>{e.firstElementChild.classList.remove("hidden")})),e.addEventListener("mouseout",(t=>{e.firstElementChild.classList.add("hidden")}))}let o=document.querySelectorAll(".tooltip-mars");for(let e=0;e<o.length;e++)o[e].innerHTML=o[e].innerHTML.replace(/^/g,'<i class="fa fa-eye">&nbsp;</i>');let l=document.querySelectorAll("#postBox p"),a=document.querySelector("#pIdentifier")?document.querySelector("#pIdentifier").innerHTML:null;if("英文缩进"==a){for(let e=0;e<l.length;e++)l[e].classList.add("eng");let e=document.querySelectorAll("#postBox blockquote p");for(let t=0;t<e.length;t++)e[t].classList.add("noIndent")}else if("中文缩进"==a){let e=document.querySelectorAll("#postBox blockquote p"),t=document.querySelectorAll("#postBox p");for(let t=0;t<e.length;t++)e[t].classList.add("noIndent");if(window.innerWidth<=768)for(let e=0;e<t.length;e++)1==t[e].childNodes.length&&"CODE"==t[e].childNodes[0].tagName&&(t[e].style.textIndent="0",t[e].style.textAlign="left",t[e].style.wordWrap="break-word")}else if("无缩进"==a)for(let e=0;e<l.length;e++)l[e].classList.add("noIndent");else if("全缩进"==a){for(let e=0;e<l.length;e++)l[e].classList.add("allIndent");let e=document.querySelectorAll("#postBox blockquote p");for(let t=0;t<e.length;t++)e[t].classList.remove("allIndent"),e[t].classList.add("noIndent")}let i=document.querySelectorAll("#postPager img");for(let e=0;e<i.length;e++)i[e].addEventListener("mouseover",n,!1),i[e].addEventListener("mouseout",r,!1);let s=document.querySelectorAll("#postBox img");for(let e=0;e<s.length;e++){s[e].parentNode.style.textIndent="0";let t=s[e].parentNode.offsetWidth,o=s[e].offsetWidth;s[e].style.marginLeft=.45*(t-o)+"px"}function d(e){location.href=document.querySelector("#baseURLIdentifier").innerHTML+"/tags/#"+e.target.innerHTML}let c=document.querySelectorAll("#tagsBox #tags span");if(window.innerWidth>768)for(let e=0;e<c.length;e++)c[e].addEventListener("mousedown",d,!1);else for(let e=0;e<c.length;e++)c[e].addEventListener("touchend",d,!1)}document.querySelector("#frontShow")&&(window.addEventListener("load",o(u,0),!!e&&{passive:!1}),window.addEventListener("scroll",o(u,0),!!e&&{passive:!1})),window.addEventListener("load",g,!1),window.innerWidth<=768&&(window.addEventListener("load",S,!1),$(document).one("touchstart",S)),function(){let e=document.querySelectorAll(".blogYear,#postContent h1,#postContent h2,#postContent h3,#postContent h4,#postContent h5,#postContent h6");function t(e){window.scrollTo(0,e.target.offsetTop-1.2*document.querySelector("#navBlur").offsetHeight)}for(let o=0;o<e.length;o++)e[o].addEventListener("mousedown",t,!1)}(),window.innerWidth>=769&&(document.querySelector("#navBlog").style.display="block"),window.addEventListener("resize",t(B,.5));let h=0,w=0;function v(e){if(w-h>=.2*window.innerWidth&&h>=.1*window.innerWidth){let e=document.querySelectorAll("#navMobile,#navMobile #navBlur,#navMobile #navTrans");for(let t=0;t<e.length;t++)e[t].style.animation="navMove 0.5s ease-in forwards"}else if(w-h<=-.2*window.innerWidth){let e=document.querySelectorAll("#navMobile,#navMobile #navBlur,#navMobile #navTrans");for(let t=0;t<e.length;t++)e[t].style.animation="navMoveBack 0.5s ease-in forwards"}h=0,w=0}function f(e){1==e.touches.length&&(h=e.touches[0].clientX),window.addEventListener("touchend",v,!1)}function m(e){return window.removeEventListener("touchend",v,!1)}function p(e){1==e.changedTouches.length&&(w=e.changedTouches[0].clientX)}function y(e){let t=e.attr("src").replace(/Black/g,"White");return e.attr("src",t),!0}function L(e){let t=e.attr("src").replace(/White/g,"Black");return e.attr("src",t),!0}function S(){if(window.innerWidth<=768)if("Day"!=window.localStorage.marswizBlogDayNight&&window.localStorage.marswizBlogDayNight){$("body,.cloudTag,blockquote,#searchBox").css({backgroundColor:"#506060"}),$("#blogBox #link,#blogs a,.blogYear,.tag,.cloudTag,#tagBlogs a,#aboutMeBox,#aboutMeTitle,#searchBox span,#searchResultList div,#noResultContent p").css({color:"white"}),$("p#frontPostTagsMobile,.cloudTag").css({borderColor:"white"});let e=document.querySelectorAll("#pageNumBox,#changeDayNight,#postBox,.leancloud-visitors,.vat,.vcontent p,.vcontent a,.vwrap,input,textarea,.vinfo,.vinfo .vnum,.vlist,.vcount,div.vctrl,div.vctrl span");for(let t=0;t<e.length;t++)e[t].style.color="white";$("#webInfo,.power a").css("color","#999"),$("path").attr("fill","white"),$("div#socialBall").css({backgroundColor:"#bdb7b1"}),$("div#navBlur").css({backgroundColor:"#506060",boxShadow:"0 0 3px #6cd1ef"}),$("#changeDayNight").attr("class","fa fa-moon-o");for(let e=0;e<$("img").length;e++)y($($("img")[e]));$("pre").css("backgroundColor","#999")}else{$("body,.cloudTag,blockquote,#searchBox").css({backgroundColor:""}),$("#blogBox #link,#blogs a,.blogYear,.tag,.cloudTag,#tagBlogs a,#aboutMeBox,#aboutMeTitle,#searchBox span,#searchResultList div,#noResultContent p").css({color:""}),$("p#frontPostTagsMobile,.cloudTag").css({borderColor:""}),$("#pageNumBox,#changeDayNight").css({color:""}),$("div#socialBall").css({backgroundColor:""}),$("div#navBlur").css({backgroundColor:"",boxShadow:""});let e=document.querySelectorAll("#pageNumBox,#changeDayNight,#postBox,.leancloud-visitors,.vat,.vcontent p,.vcontent a,.vwrap,input,textarea,.vinfo,.vinfo .vnum,.vlist,.vcount,div.vctrl,div.vctrl span");for(let t=0;t<e.length;t++)e[t].style.color="";$("#webInfo,.power a").css("color",""),$("path").attr("fill",""),$("#changeDayNight").attr("class","fa fa-lightbulb-o");for(let e=0;e<$("img").length;e++)L($($("img")[e]));$("pre").css("backgroundColor","")}}function B(){window.innerWidth<=768?(window.addEventListener("touchstart",f,!!e&&{passive:!1}),window.addEventListener("touchend",p,!!e&&{passive:!1}),window.addEventListener("gesturestart",m,!1),document.querySelector("#navBlog").style.display="none"):document.querySelector("#navBlog").style.display="block"}window.innerWidth<=768&&(window.addEventListener("touchstart",f,!1),window.addEventListener("touchend",p,!1),window.addEventListener("gesturestart",m,!1),document.querySelectorAll("pre").forEach((e=>{e.addEventListener("touchend",(e=>{e.stopPropagation()}),!0)}))),$("#changeDayNight").click((function(){window.innerWidth<=768&&(window.localStorage?window.localStorage.marswizBlogDayNight&&"Day"!=window.localStorage.marswizBlogDayNight?window.localStorage.setItem("marswizBlogDayNight","Day"):window.localStorage.setItem("marswizBlogDayNight","Night"):alert("Your Browser Doesn't Support Web Storage. The Function Cannot Be Used."))})),$("#changeDayNight").click(S),window.innerWidth<=768&&window.addEventListener("load",S,!1),window.addEventListener("load",(function(){window.innerWidth>=768&&(document.querySelector("#frontShow")?window.scrollY>=document.querySelector("#frontShow").clientHeight-2?l():(a(),$("#frontPageInfo").slideDown(1500),$("#tagBox").slideDown(500)):(document.querySelector("#navBlog").classList.remove("navHidden"),document.querySelector("#navBlog").classList.add("navShown")))}),!1),window.addEventListener("load",g,!1),window.addEventListener("resize",t(B,.5)),window.addEventListener("keydown",(e=>{e.ctrlKey&&-1!==["s","p"].indexOf(e.key)&&e.preventDefault()}))})();